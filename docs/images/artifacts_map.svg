<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1100" height="700" viewBox="0 0 1100 700">
  <style>
    .box { fill: #f8fafc; stroke: #2d3748; stroke-width: 2; rx: 8; }
    .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #1a202c; }
    .text { font-family: Arial, sans-serif; font-size: 14px; fill: #2d3748; }
    .arrow { stroke: #2d3748; stroke-width: 2; marker-end: url(#arrowhead); }
    .group { fill: #edf2f7; opacity: 0.6; }
    .label { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #2d3748; }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="8" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2d3748" />
    </marker>
  </defs>

  <!-- Groups -->
  <rect x="40" y="60" width="1020" height="260" class="group" />
  <text x="50" y="50" class="label">离线产物</text>

  <rect x="40" y="360" width="1020" height="260" class="group" />
  <text x="50" y="350" class="label">在线使用</text>

  <!-- Offline Artifacts -->
  <rect x="60" y="90" width="220" height="70" class="box" />
  <text x="70" y="115" class="title">atomic_notes.json</text>
  <text x="70" y="140" class="text">原子笔记集合</text>

  <rect x="300" y="90" width="220" height="70" class="box" />
  <text x="310" y="115" class="title">embeddings.npy</text>
  <text x="310" y="140" class="text">向量嵌入</text>

  <rect x="540" y="90" width="220" height="70" class="box" />
  <text x="550" y="115" class="title">vector.index</text>
  <text x="550" y="140" class="text">向量索引</text>

  <rect x="780" y="90" width="220" height="70" class="box" />
  <text x="790" y="115" class="title">graph.json</text>
  <text x="790" y="140" class="text">node-link 图</text>

  <rect x="60" y="180" width="220" height="70" class="box" />
  <text x="70" y="205" class="title">graph.graphml</text>
  <text x="70" y="230" class="text">图可视化</text>

  <rect x="300" y="180" width="220" height="70" class="box" />
  <text x="310" y="205" class="title">clustering.json</text>
  <text x="310" y="230" class="text">主题聚类</text>

  <rect x="540" y="180" width="220" height="70" class="box" />
  <text x="550" y="205" class="title">chunks.jsonl</text>
  <text x="550" y="230" class="text">分块追踪</text>

  <rect x="780" y="180" width="220" height="70" class="box" />
  <text x="790" y="205" class="title">audit.log</text>
  <text x="790" y="230" class="text">一致性/质量审计</text>

  <!-- Online Usage -->
  <rect x="60" y="390" width="220" height="70" class="box" />
  <text x="70" y="415" class="title">VectorRetriever</text>
  <text x="70" y="440" class="text">读取 embeddings/index</text>

  <rect x="300" y="390" width="220" height="70" class="box" />
  <text x="310" y="415" class="title">GraphRetriever</text>
  <text x="310" y="440" class="text">读取 graph.json</text>

  <rect x="540" y="390" width="220" height="70" class="box" />
  <text x="550" y="415" class="title">HybridSearcher</text>
  <text x="550" y="440" class="text">融合 dense/BM25/graph</text>

  <rect x="780" y="390" width="220" height="70" class="box" />
  <text x="790" y="415" class="title">ContextDispatcher</text>
  <text x="790" y="440" class="text">打包原子笔记</text>

  <rect x="60" y="480" width="220" height="70" class="box" />
  <text x="70" y="505" class="title">LLM Clients</text>
  <text x="70" y="530" class="text">Local/OpenAI/Ollama/LMStudio</text>

  <rect x="300" y="480" width="220" height="70" class="box" />
  <text x="310" y="505" class="title">AnswerVerifier</text>
  <text x="310" y="530" class="text">片段定位/校验</text>

  <!-- Edges -->
  <line x1="170" y1="160" x2="170" y2="390" class="arrow" />
  <line x1="410" y1="160" x2="410" y2="390" class="arrow" />
  <line x1="650" y1="160" x2="650" y2="390" class="arrow" />
  <line x1="890" y1="160" x2="890" y2="390" class="arrow" />
  <line x1="170" y1="250" x2="170" y2="480" class="arrow" />
  <line x1="410" y1="250" x2="410" y2="480" class="arrow" />
  <line x1="650" y1="250" x2="650" y2="480" class="arrow" />
  <line x1="890" y1="250" x2="890" y2="480" class="arrow" />
</svg>